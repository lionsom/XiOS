!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.WAH=t():e.WAH=t()}(self,(function(){return(()=>{var e={335:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,"/* 控制器 */\n.wah-controls {\n  position: fixed;\n  z-index: 100000;\n  bottom: 50px;\n  right: constant(safe-area-inset-right);\n  right: env(safe-area-inset-right);\n  display: flex;\n  align-items: center;\n  background: rgba(0, 0, 0, 0.5);\n  color: #fff;\n  font-size: 14px;\n  border-top-left-radius: 4px;\n  border-bottom-left-radius: 4px;\n  overflow: hidden;\n}\n.wah-control {\n  padding: 4px;\n  display: flex;\n  align-items: center;\n}\n\n/* 热区蓝字 */\n.wah-hotarea-size {\n  z-index: 99999;\n  font-size: 10px;\n  background: rgba(0, 0, 255, 0.5);\n  color: #FFF;\n}\n\n/* 读屏红框 */\n.wah-reading-panel {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 99999;\n  pointer-events: none;\n}\n.wah-reading-outline {\n  position: absolute;\n  z-index: 99999;\n  transform: translateZ(999999px);\n  border: 2px solid rgba(255, 0, 0, 0.5);\n  background: rgba(100, 0, 0, 0.3);\n  font-size: 10px;\n  font-weight: 500;\n  line-height: 1.4;\n  color: #fff;\n  word-break: break-all;\n}\n",""]);const o=i},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var l=0;l<e.length;l++){var c=[].concat(e[l]);r&&i[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),t.push(c))}},t}},695:e=>{"use strict";var t={};e.exports=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}},379:e=>{"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var o={},a=[],l=0;l<e.length;l++){var c=e[l],s=r.base?c[0]+r.base:c[0],u=o[s]||0,d="".concat(s," ").concat(u);o[s]=u+1;var h=n(d),p={css:c[1],media:c[2],sourceMap:c[3]};-1!==h?(t[h].references++,t[h].updater(p)):t.push({identifier:d,updater:i(p,r),references:1}),a.push(d)}return a}function i(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var o=r(e=e||[],i=i||{});return function(e){e=e||[];for(var a=0;a<o.length;a++){var l=n(o[a]);t[l].references--}for(var c=r(e,i),s=0;s<o.length;s++){var u=n(o[s]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}o=c}}},216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t),t}},795:e=>{"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r=n.css,i=n.media,o=n.sourceMap;i?e.setAttribute("media",i):e.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(r,e)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},709:()=>{document.addEventListener("keydown",(e=>{"Digit1"==e.code&&e.ctrlKey&&document.getElementById("wah-control-hotarea").click(),"Digit2"==e.code&&e.ctrlKey&&document.getElementById("wah-control-reading").click()}))}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{"use strict";n.r(r),n.d(r,{default:()=>W});var e=n(379),t=n.n(e),i=n(795),o=n.n(i),a=n(695),l=n.n(a),c=n(216),s=n.n(c),u=n(335),d={styleTagTransform:function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}},setAttributes:function(e){var t=n.nc;t&&e.setAttribute("nonce",t)},insert:function(e){var t=l()("head");if(!t)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");t.appendChild(e)}};d.domAPI=o(),d.insertStyleElement=s(),t()(u.Z,d),u.Z&&u.Z.locals&&u.Z.locals;let h=[];const p={proxy:e=>new Proxy(e,{get(e,t){if("function"==typeof e[t])return e[t].bind(e);const n=h.find((t=>t.obj===e));if(n){if(n.props.indexOf(t)>-1)return null;n.props.push(t)}else h.push({obj:e,props:[t]});return Reflect.get(e,t)}}),clear(){h=[]}},f=function e(t,n){if(!t)return"";n||(n="name");const r=[];return t.wordings&&("all"===n?r.push(Object.values(t.wordings).map((e=>e.join(""))).filter((e=>e)).join("，")):r.push(t.wordings[n].filter((e=>e)))),t.children&&t.children.forEach((t=>{r.push(e(t,n))})),r.join("all"===n?"，":"")};function b(e,t){try{return e.style&&e.style[t]||window.getComputedStyle(e,null).getPropertyValue(t.replace(/([A-Z])/g,"-$1").toLowerCase())}catch(e){return""}}function g(e){if(!e)return"absolute";let t=e;for(;;){const n=b(t,"position");if("fixed"===n)return"fixed";if("sticky"===n)return t===e?"sticky":"absolute";if(t=t.parentElement,t===document.body||!t)break}return"absolute"}function m(e,t){if(e===t)return!1;for(;;){if((e=e.parentElement)===document.body||!e)return!1;if(e===t)return!0}}function y(e){if(e&&e.nodeName)return e.nodeName.toLowerCase()}const x="wah-reading-panel",w=function(e,t,n){return e=(e||"").trim().replace(/\n/g,""),t=(t||"").trim().replace(/\n/g,""),e===(n=(n||"").trim().replace(/\n/g,""))&&(n=""),e||(e=n,n=""),{name:[e].filter((e=>e)),type:[t].filter((e=>e)),desc:[n].filter((e=>e))}},v=function(e){if(e.id){const t=document.querySelector(`label[for=${e.id}]`);if(t)return t.getAttribute("aria-label")||t.textContent||t.title||""}return""},A=function(e,t){if(e.getAttribute){const n=e.getAttribute("aria-labelledby");if(n){const r=n.split(" "),i=[];return r.forEach((n=>{const r=document.getElementById(n);r&&!m(r,e)&&i.push(f(N(r,t,{scanHidden:!0})))})),i.join("")}}return e.getAttribute("aria-label")||""},E=function(e,t){if(e.getAttribute){const n=e.getAttribute("aria-describedby");if(n){const r=n.split(" "),i=[];return r.forEach((n=>{const r=document.getElementById(n);r&&!m(r,e)&&i.push(f(N(r,t,{scanHidden:!0})))})),i.join("")}}return""},j={h1:"标题级别一",h2:"标题级别二",h3:"标题级别三",h4:"标题级别四",h5:"标题级别五",h6:"标题级别六"},C=function(e){return function(t,...n){const r=p.proxy(t),i=e.apply(null,[r,t].concat(n));return p.clear(),i}},T={a:C(((e,t,n)=>w(A(t,n)||e.textContent||e.title,t.href&&"链接",E(t,n)||e.title))),button:C(((e,t,n)=>function(e,t,n,r){return w(A(t,n)||e.textContent||e.title,r,E(t,n)||e.title)}(e,t,n,(null!==t.getAttribute("disabled")?"变暗，":"")+"按钮"))),img:C(((e,t,n)=>w(A(t,n)||e.getAttribute("alt")||e.title,"图像",E(t,n)||e.title))),svg:C(((e,t,n)=>w(A(t,n)||e.alt||e.title,"图像",E(t,n)||e.title))),input:C(((e,t,n)=>{switch(t.type){case"image":return w(v(t)||A(t,n)||e.alt||e.value||e.title,"图像",E(t,n)||e.title);case"button":return w(v(t)||A(t,n)||e.value||e.title,(null!==t.getAttribute("disabled")?"变暗，":"")+"按钮",E(t,n)||e.value||e.title);case"submit":return w(v(t)||A(t,n)||e.value||"提交","按钮",E(t,n)||e.title);case"reset":return w(v(t)||A(t,n)||e.value||"重置","按钮",E(t,n)||e.title);case"checkbox":return w(v(t)||A(t,n),"复选框，"+(t.checked?"已勾选":"未勾选"),E(t,n)||e.title);case"radio":return w(v(t)||A(t,n),"单选按钮，"+(t.checked?"已勾选":"未勾选"),E(t,n)||e.title);case"range":{let r=t.getAttribute("aria-valuetext");if(!r){const e=+t.min||0,n=+t.max||100,i=+t.value||(e+n)/2;r=`${i}，${(100*(i-e)/(n-e)).toFixed(1)}%`}return w([v(t)||A(t,n)||e.title,r].filter((e=>e)).join("，"),"可调",E(t,n)||e.title)}default:return w((v(t)||A(t,n)||function(e){if("label"===y(e.previousElementSibling)){const t=e.previousElementSibling;return t.getAttribute("aria-label")||t.textContent||t.title||""}}(t)||"")+(e.value||e.placeholder),"文本栏",E(t,n)||!t.value&&e.placeholder||e.title)}})),textarea:C(((e,t,n)=>w((v(t)||A(t,n)||"")+(e.value||e.placeholder||e.title),"多行文本栏",E(t,n)||e.placeholder||e.title))),label:C(((e,t,n)=>{if("input"===y(t.nextElementSibling)){const e=t.nextElementSibling.type;if(["image","button","submit","reset","checkbox","radio","range"].indexOf(e)<0)return}return w(f(N(t,n),"all")||e.textContent||A(t,n),"","")})),progress:C(((e,t,n)=>{let r=t.getAttribute("aria-valuetext");if(!r){const e=0,n=+t.max||100,i=+t.value||e;r=`${i}，${(100*(i-e)/(n-e)).toFixed(1)}%`}return w([v(t)||A(t,n)||e.title,r].filter((e=>e)).join("，"),"",E(t,n)||e.title)}))},k=function(e,t,n,r){return w(A(t,n)||f(N(t,n))||e.title,r,E(t,n)||e.title)},I={img:C(((e,t,n)=>w(A(t,n)||e.getAttribute("alt")||e.title,"图像",E(t,n)||e.title))),button:C(((e,t,n)=>k(e,t,n,(null!==t.getAttribute("disabled")?"变暗，":"")+"按钮"))),option:C(((e,t,n)=>k(e,t,n,""))),textbox:C(((e,t,n)=>k(e,t,n,"文本栏"))),text:C(((e,t,n)=>w(f(N(t,n))))),checkbox:C(((e,t,n)=>w(v(t)||A(t,n)||f(N(t,n)),"复选框，"+("true"===t.ariaChecked?"已勾选":"未勾选"),E(t,n)||e.title))),radio:C(((e,t,n)=>w(v(t)||A(t,n)||f(N(t,n)),"单选按钮，"+("true"===t.ariaChecked?"已勾选":"未勾选"),E(t,n)||e.title))),slider:C(((e,t,n)=>{let r=t.getAttribute("aria-valuetext");if(!r){const e=+t.getAttribute("aria-valuemin")||0,n=+t.getAttribute("aria-valuemax")||100,i=+t.getAttribute("aria-valuenow")||(e+n)/2;r=`${i}，${(100*(i-e)/(n-e)).toFixed(1)}%`}return w([v(t)||A(t,n)||e.title,r].filter((e=>e)).join("，"),"可调",E(t,n)||e.title)})),progressbar:C(((e,t,n)=>{let r=t.getAttribute("aria-valuetext");if(!r){const e=+t.getAttribute("aria-valuemin")||0,n=+t.getAttribute("aria-valuemax")||100,i=+t.getAttribute("aria-valuenow")||(e+n)/2;r=`${i}，${(100*(i-e)/(n-e)).toFixed(1)}%`}return w([v(t)||A(t,n)||e.title,r].filter((e=>e)).join("，"),"",E(t,n)||e.title)}))},S={link:C(((e,t,n)=>{const r=A(t,n)||f(N(t,n))||e.title,i=E(t,n)||e.title;return w(r,"链接",i)})),navigation:C(((e,t,n)=>w([f(N(t,n)),A(t,n)||e.title].filter((e=>e)).join("，"),"导航",""))),banner:C(((e,t,n)=>w(A(t,n)||e.title||f(N(t,n)),"横幅","")))},L={alertdialog:C(((e,t,n)=>w(A(t,n)||e.title,"网页警告对话框",E(t,n)||e.title))),dialog:C(((e,t,n)=>w(A(t,n)||e.title,"网页对话框",E(t,n)||e.title)))},O="text",$="role",M=["script","style"];function N(e,t,n){const r={parent:t,dom:e,inheritARIAType:j[y(e)]||"",inheritResultType:t&&t.inheritResultType||"",inheritZIndex:t&&t.inheritZIndex||0,inheritDescribe:t&&t.inheritDescribe||""};n||(n={});const i=e.getBoundingClientRect(),o=[],a=[];let l=r;for(;l.inheritARIAType&&a.push(l.inheritARIAType),l=l.parent,l;);return e.childNodes.forEach((e=>{const t=y(e);if((n.scanHidden||!(e.getAttribute&&void 0!==e.getAttribute("aria-hidden")&&null!==e.getAttribute("aria-hidden")||"none"===b(e,"display")))&&(!/^#/.test(t)||/^#text/.test(t))&&!(M.indexOf(t)>-1))if("#text"===t){const n=e.textContent.trim();if(n){const e=w(n,"",r.inheritDescribe);a.length&&e.type.push(a.join("，")),o.push({type:O,name:t,wordings:e,context:r})}}else{const i=e.getBoundingClientRect(),l=(e.getAttribute("role")||"").toLowerCase();if(l){const t=Object.assign({},r);if(t.inheritResultType=$,S[l]||L[l]){let n,r;S[l]?(n=S[l](e,t),t.inheritARIAType=n.type.join("，"),t.inheritDescribe=n.desc.join("，"),e.children.length&&(n=null)):(t.inheritZIndex=1,n=L[l](e,t),n.name.length||(n.name=[""])),a.length&&n.type.push(a.join("，")),e.children.length&&(r=N(e,t)),o.push({type:$,node:e,name:l,rect:i,wordings:n,children:r?[r]:[],context:t})}else if(I[l]){const n=I[l](e,t);a.length&&n.type.push(a.join("，")),o.push({type:$,node:e,name:l,rect:i,wordings:n,context:t})}else{const r=N(e,t,n);r&&o.push(r)}}else if(T[t]){const n=T[t](e,r);a.length&&n.type.push(a.join("，")),o.push({type:"replaced",node:e,name:t,rect:i,wordings:n,context:r})}else if(r.inheritResultType===$&&e.getAttribute&&e.getAttribute("aria-label")){const n=e.getAttribute("aria-label"),i=w(n);a.length&&i.type.push(a.join("，")),o.push({type:O,name:t,wordings:i,context:r})}else{const t=N(e,r,n);t&&o.push(t)}}})),o.length?{type:"tree",node:e,name:e.nodeName,rect:i,children:o,context:r}:null}function R(e,t){if(!t)return;const n=function(e){if(!e.rect)return;const t=window.scrollY||document.documentElement.scrollTop,n=window.scrollX||document.documentElement.scrollLeft,r=document.createElement("DIV"),{rect:i}=e,o=g(e.node),a="fixed"===o;if(r.setAttribute("aria-hidden","true"),r.classList.add("wah-reading-outline"),r.style.position=o,r.style.top=(a?0:t)+i.top-1+"px",r.style.left=(a?0:n)+i.left-1+"px",r.style.width=i.width-2+"px",r.style.height=i.height-2+"px",r.style.zIndex=e.context&&e.context.inheritZIndex||0,r._wahNode=e.node,e.wordings)r.innerText=e.wordings.name.concat(e.wordings.type.concat(e.wordings.desc)).filter((e=>e&&e)).join("，");else{if(!e.children)return;if(!e.children.filter((e=>e.type===O)).length)return;r.innerText=e.children.map((e=>{switch(e.type){case O:return e.wordings.name.concat(e.wordings.type.concat(e.wordings.desc)).filter((e=>e&&e)).join("，");default:return`<${e.name}>`}})).join(" ")}return r}(t);n&&e.appendChild(n),t.children&&t.children.length&&t.children.forEach((t=>{R(e,t)}))}function D(){const e=document.getElementById(x);e&&e.parentElement.removeChild(e),p.clear()}function Z(e){e||(e=document.body);const t=N(e);t&&function(e,t){if(!t)return;const n=document.createElement("DIV");n.id=x,n.classList.add(x),n.setAttribute("aria-hidden","true"),R(n,t),e.appendChild(n)}(e,t)}let z,F;const H={hide(){z&&(z.disconnect(),z=null),D()},show(e,t){if(e||(e=document.body),t&&t.watch&&!z){const t=window.MutationObserver||window.WebKitMutationObserver;z=new t((t=>{Array.prototype.find.call(t[0].addedNodes,(e=>e.id===x))||Array.prototype.find.call(t[0].removedNodes,(e=>e.id===x))||(clearTimeout(F),F=setTimeout((()=>{D(),Z(e)}),500))})),z.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style"]})}Z(e)}},P=["a:not([wah-hotarea-scaned])","input:not([wah-hotarea-scaned])","button:not([wah-hotarea-scaned])"],B=[];let V;function _(e){if(!e||e===document)return;const t=document.createElement("DIV"),n=window.pageYOffset||document.documentElement.scrollTop,r=window.pageXOffset||document.documentElement.scrollLeft,i=e.getBoundingClientRect(),o=g(e),a="fixed"===o;t.classList&&t.classList.add("wah-hotarea-size"),t.textContent=`[${e.offsetWidth}*${e.offsetHeight}]`,t.style.position=o,t.style.top=`${(a?0:n)+i.top}px`,t.style.left=`${(a?0:r)+i.left}px`,t._wahNode=e,e.getAttribute&&!e.getAttribute("wah-hotarea")&&e.setAttribute("wah-hotarea","click"),document.querySelector("#wah-hotarea-panel").appendChild(t)}!function(){const e=Object.getOwnPropertyNames(window).filter((e=>/^HTML/.test(e))).map((e=>window[e]));for(let t=0;t<e.length;t++)!function(n){e[t].prototype.addEventListener=function(e){return"click"!==e&&"touchstart"!==e&&"touchend"!==e||(this&&this.setAttribute&&this.setAttribute("wah-hotarea",e),B.indexOf(this)<0&&B.push(this)),n.apply(this,arguments)}}(e[t].prototype.addEventListener)}();const q={hide(){V&&document.head.removeChild(V);const e=document.querySelector("#wah-hotarea-panel");e&&e.parentElement.removeChild(e)},show(){const e=document.createElement("DIV");e.id="wah-hotarea-panel",document.body.appendChild(e);const t=document.querySelectorAll(P);Array.prototype.forEach.call(t,(e=>{e.setAttribute("wah-hotarea-scaned",!0),B.indexOf(e)<0&&B.push(e)})),B.forEach(_),V=document.createElement("style"),V.appendChild(document.createTextNode("[wah-hotarea] {\n  box-shadow: 0 0 0 1px rgba(0, 0, 255, 0.5), inset 0 0 0 1px rgba(0, 0, 255, 0.5);\n  outline: 1px solid rgba(0, 0, 255, 0.5);\n}\n")),document.head.appendChild(V)}};n(709);const W={init(e){e||(e=document.body),function(e){const t=document.createElement("DIV");t.innerHTML='<div class="wah-controls">\n  <div class="wah-control">\n    <label for="wah-control-hotarea">走查热区</label>\n    <input type="checkbox" id="wah-control-hotarea" />\n  </div>\n  <div class="wah-control">\n    <label for="wah-control-reading">走查读屏</label>\n    <input type="checkbox" id="wah-control-reading" />\n  </div>\n</div>',t.addEventListener("input",(t=>{const{target:n}=t,{checked:r}=n;switch(n.id){case"wah-control-hotarea":r?q.show():q.hide();break;case"wah-control-reading":H.hide(),r&&H.show(e,{watch:!0})}}),!1),e.appendChild(t)}(e)}}})(),r})()}));